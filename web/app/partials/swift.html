
<div class="row my-btn-row">
    <blockchain-pie class="col-md-6" data="ctl.nodesData" size="500" filter="ctl.filterId"></blockchain-pie>


    <div class="col-md-6 md-pull-right">

        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" ng-class="!ctl.filterId ?'active':''">
            <a href="#admin" aria-controls="admin" role="tab" ng-click="ctl.filterId = null">Admin</a>
          </li>
          <li role="presentation" ng-class="ctl.filterId ?'active':''" href="#user1">

              <a data-toggle="dropdown" role="tab" aria-haspopup="true" aria-expanded="false">
                <span ng-hide="ctl.filterId">User selection</span>
                <span ng-show="ctl.filterId">User: <span class="badge mybadge" style="background-color: {{ctl.nodesData[ctl.filterId].color}}"></span> {{ctl.filterId*1+1}}</span>
                <span class="caret"></span>
              </a>

              <ul class="dropdown-menu">
                <li role="presentation" ng-repeat="(id, node) in ctl.nodesData" ng-class="ctl.filterId == id ?'active':''">
                    <a href="#user1" ng-click="ctl.filterId = id"> <span class="badge mybadge" style="background-color: {{::node.color}}"></span> User {{::id*1+1}}</a>
                </li>
              </ul>
          </li>
        </ul>

        <div class="tab-content">
            <div role="tabpanel" class="tab-pane" id="admin" ng-class="!ctl.filterId ?'active':''">

                <div class="col-md-12 ">
                    <span class="btn btn-warning" ng-click="ctl.initDemo()" freq><i class="glyphicon glyphicon-blackboard"></i> Demo</span>
                </div>

                <div class="col-md-12 ">
                    <span class="btn btn-primary" ng-click="ctl.addCounterParty()" freq> <i class="glyphicon glyphicon-plus"></i> Add counterparty</span>
                </div>
                <div class="col-md-12 ">
                    <span class="btn btn-danger" ng-click="ctl.addClaim()" freq> <i class="glyphicon glyphicon-euro"></i> Add claim</span>
                </div>
                <div class="col-md-12 ">
                    <span class="btn btn-warning" ng-click="ctl.runNetting()" freq><i class="glyphicon glyphicon-resize-small"></i> Run netting</span>
                </div>

                <hr>

                <div class="col-md-12 ">
                    <span class="btn btn-default" ng-click="ctl.reload()" freq><i class="glyphicon glyphicon-refresh"></i> update</span>
                </div>
                <div class="col-md-12 ">
                    <span class="btn btn-default" ng-click="ctl.clearNetting()" freq><i class="glyphicon glyphicon-remove"></i> clear</span>
                </div>
            </div>

            <div role="tabpanel" class="tab-pane" id="user1" ng-class="ctl.filterId ?'active':''">
                <p style="margin-top:40px; margin-left:40px;">
                    <i>Read-only mode</i>
                </p>
            </div>
        </div><!-- /.tab-content -->

    </div>
    <br>
</div>
<style type="text/css">
    .my-btn-row .col-md-12{
        display: inline-block;
        margin-top: 15px;
        margin-bottom: 5px;
    }
</style>
<div>
    <blockchain-log endpoint={{ctl.getProtobufEndpoint()}}> </blockchain-log>
</div>




<nav class="navbar navbar-default" ng-init="ctl.init()">
    <div class="container-fluid">
        <div class="navbar-header">
            <!-- <button type="button" class="collapsed navbar-toggle" data-toggle="collapse" data-target="#navbar1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button> -->
            <a href="#" class="navbar-brand">
                Counterparties: {{ctl.stats.number_of_counter_parties || '-'}};
                Claims: {{ctl.stats.number_of_claims || '-'}};
                Metric L1: {{ ctl.stats.metric_l1 |number:2}};
                Metric L2: {{ctl.stats.metric_l2 |number:2}};
                Sum: {{ ctl.stats.sum_of_h |number:2 }};
            </a>
        </div>


    </div>
</nav>

<div class="bs-callout bs-callout-info" id="callout-type-b-i-elems" hidden>
    <h3 class="vertical-text">Payment Instructions</h3>

    <!-- <h2></h2> -->
    <table class="table">
        <thead>
            <tr>
                <th>#</th>
                <th>From</th>
                <th>To</th>
                <th>Amount</th>
                <th>Purpose</th>
                <th>Payment instructions</th>
                <th>Confirmation</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="o in ctl.paymentList|filter:ctl.showInList|orderBy:'id*1' as list ">
                <td>{{::o.id}}</td>
                <td>{{::o.from}}</td>
                <td>{{::o.to}}</td>
                <td>{{::o.amount}}</td>
                <td>{{::o.purpose}}</td>
                <td>{{::o.description}}</td>
                <td class="my-btn-group">
                    <a href="#" ng-show="o.confirm1===false" class="btn btn-default" ng-click="ctl.submitSeller(o)"><i class="glyphicon glyphicon-ok"></i> Payer</a>
                    <a href="#" ng-if="o.confirm1===undefined" class="btn btn-link" disabled><i class="glyphicon glyphicon-time"></i> Processing...</a>
                    <a href="#" ng-if="o.confirm1===true" class="btn btn-success" disabled><i class="glyphicon glyphicon-saved"></i> Confirmed</a>

                    <a href="#" ng-show="o.confirm2===false" class="btn btn-default" ng-click="ctl.submitBuyer(o)"><i class="glyphicon glyphicon-ok"></i> Payee</a>
                    <a href="#" ng-if="o.confirm2===undefined" class="btn btn-link" disabled><i class="glyphicon glyphicon-time"></i> Processing...</a>
                    <a href="#" ng-if="o.confirm2===true" class="btn btn-success" disabled><i class="glyphicon glyphicon-saved"></i> Confirmed</a>
                </td>
            </tr>

            <tr ng-hide="list.length">
                <td colspan="5" align="center">
                    <i>No items</i>
                </td>
            </tr>
        </tbody>
    </table>


</div>











